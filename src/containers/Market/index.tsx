import React, { useContext, useEffect, useState } from "react";
import { Grid, Snackbar, SnackbarCloseReason } from "@material-ui/core";
import { Skeleton, Alert } from "@material-ui/lab";
import useAxios from "axios-hooks";
import PrimaryChart from "../../components/PrimaryChart";
import SecondaryChart from "../../components/SecondaryChart";
import TimeFilterButtons from "../../components/TimeFilterButtons";
import tokenContext from "../../context/tokenContext";
import { SC } from "./styled";
import { DataProps } from "interfaces/DataProps";
import useWindowDimensions from "../../hooks/useWindowDimensions";
import { useQueryParams, StringParam } from "use-query-params";

const Market = () => {
  const { tokenData } = useContext(tokenContext);
  const [tokenPrices, setTokenPrices] = useState("");
  console.log("world", tokenData);

  // const {
  //   filteredDataState: { filteredData },
  // } = React.useContext(MarketContext);

  const filteredData = [
    {
      date: "2022-06-26T13:15:01.253Z",
      price: 21393.316898311943,
    },
    {
      date: "2022-06-26T13:20:23.876Z",
      price: 21428.658591484418,
    },
    {
      date: "2022-06-26T13:23:57.242Z",
      price: 21431.041291346635,
    },
    {
      date: "2022-06-26T13:30:00.591Z",
      price: 21397.71151901963,
    },
    {
      date: "2022-06-26T13:34:40.483Z",
      price: 21418.314401219326,
    },
    {
      date: "2022-06-26T13:39:38.054Z",
      price: 21424.139790132722,
    },
    {
      date: "2022-06-26T13:45:23.461Z",
      price: 21387.323212047286,
    },
    {
      date: "2022-06-26T13:50:29.508Z",
      price: 21396.699966146985,
    },
    {
      date: "2022-06-26T13:53:50.469Z",
      price: 21390.411847677737,
    },
    {
      date: "2022-06-26T14:00:51.962Z",
      price: 21419.383242450156,
    },
    {
      date: "2022-06-26T14:05:23.490Z",
      price: 21428.176935247764,
    },
    {
      date: "2022-06-26T14:09:07.634Z",
      price: 21437.659147862363,
    },
    {
      date: "2022-06-26T14:15:06.625Z",
      price: 21428.70447904521,
    },
    {
      date: "2022-06-26T14:19:54.648Z",
      price: 21420.1871683264,
    },
    {
      date: "2022-06-26T14:25:37.605Z",
      price: 21443.834303478037,
    },
    {
      date: "2022-06-26T14:29:02.756Z",
      price: 21460.643926028737,
    },
    {
      date: "2022-06-26T14:34:57.430Z",
      price: 21465.63299627139,
    },
    {
      date: "2022-06-26T14:39:54.345Z",
      price: 21443.209264446243,
    },
    {
      date: "2022-06-26T14:44:01.128Z",
      price: 21454.47118944498,
    },
    {
      date: "2022-06-26T14:49:01.939Z",
      price: 21448.477606154025,
    },
    {
      date: "2022-06-26T14:54:55.376Z",
      price: 21429.42157560334,
    },
    {
      date: "2022-06-26T15:00:09.312Z",
      price: 21426.387878221547,
    },
    {
      date: "2022-06-26T15:06:07.057Z",
      price: 21397.387162465027,
    },
    {
      date: "2022-06-26T15:11:00.834Z",
      price: 21343.768889108083,
    },
    {
      date: "2022-06-26T15:15:50.167Z",
      price: 21339.74656354087,
    },
    {
      date: "2022-06-26T15:20:41.566Z",
      price: 21280.15284565729,
    },
    {
      date: "2022-06-26T15:25:21.407Z",
      price: 21275.544870479196,
    },
    {
      date: "2022-06-26T15:29:13.210Z",
      price: 21256.653413909386,
    },
    {
      date: "2022-06-26T15:35:42.277Z",
      price: 21297.484149490443,
    },
    {
      date: "2022-06-26T15:41:05.515Z",
      price: 21318.195053582473,
    },
    {
      date: "2022-06-26T15:45:26.129Z",
      price: 21316.78622693335,
    },
    {
      date: "2022-06-26T15:51:02.128Z",
      price: 21320.088066235665,
    },
    {
      date: "2022-06-26T15:55:06.179Z",
      price: 21320.995134048255,
    },
    {
      date: "2022-06-26T16:00:08.124Z",
      price: 21345.966699876146,
    },
    {
      date: "2022-06-26T16:06:01.698Z",
      price: 21342.8505278122,
    },
    {
      date: "2022-06-26T16:09:24.328Z",
      price: 21339.03785834689,
    },
    {
      date: "2022-06-26T16:14:58.559Z",
      price: 21315.484446078073,
    },
    {
      date: "2022-06-26T16:20:03.985Z",
      price: 21328.166695527663,
    },
    {
      date: "2022-06-26T16:25:56.472Z",
      price: 21362.335873780972,
    },
    {
      date: "2022-06-26T16:29:52.381Z",
      price: 21362.689342144757,
    },
    {
      date: "2022-06-26T16:34:59.176Z",
      price: 21355.16526141197,
    },
    {
      date: "2022-06-26T16:41:05.996Z",
      price: 21422.15528548814,
    },
    {
      date: "2022-06-26T16:46:23.537Z",
      price: 21409.144892995584,
    },
    {
      date: "2022-06-26T16:49:33.355Z",
      price: 21406.548582225125,
    },
    {
      date: "2022-06-26T16:55:47.553Z",
      price: 21419.296542639546,
    },
    {
      date: "2022-06-26T17:00:03.013Z",
      price: 21397.26571368566,
    },
    {
      date: "2022-06-26T17:04:59.669Z",
      price: 21359.56825143188,
    },
    {
      date: "2022-06-26T17:11:20.466Z",
      price: 21369.644969806603,
    },
    {
      date: "2022-06-26T17:15:27.089Z",
      price: 21334.334830179432,
    },
    {
      date: "2022-06-26T17:20:05.269Z",
      price: 21325.80343713237,
    },
    {
      date: "2022-06-26T17:25:57.639Z",
      price: 21292.139248996344,
    },
    {
      date: "2022-06-26T17:30:18.820Z",
      price: 21196.169580507263,
    },
    {
      date: "2022-06-26T17:34:45.501Z",
      price: 21239.318760094415,
    },
    {
      date: "2022-06-26T17:40:31.583Z",
      price: 21193.205597657514,
    },
    {
      date: "2022-06-26T17:44:17.246Z",
      price: 21207.236206721256,
    },
    {
      date: "2022-06-26T17:50:13.538Z",
      price: 21235.984266387426,
    },
    {
      date: "2022-06-26T17:54:35.210Z",
      price: 21255.267651486985,
    },
    {
      date: "2022-06-26T18:01:14.546Z",
      price: 21289.501201801617,
    },
    {
      date: "2022-06-26T18:06:08.186Z",
      price: 21254.669212020897,
    },
    {
      date: "2022-06-26T18:11:11.816Z",
      price: 21251.64489607763,
    },
    {
      date: "2022-06-26T18:14:58.121Z",
      price: 21243.631659518884,
    },
    {
      date: "2022-06-26T18:19:11.085Z",
      price: 21228.705390659426,
    },
    {
      date: "2022-06-26T18:25:15.469Z",
      price: 21200.715972240923,
    },
    {
      date: "2022-06-26T18:30:43.029Z",
      price: 21189.819264088845,
    },
    {
      date: "2022-06-26T18:35:40.042Z",
      price: 21208.088468738428,
    },
    {
      date: "2022-06-26T18:40:34.939Z",
      price: 21220.95974079179,
    },
    {
      date: "2022-06-26T18:44:47.685Z",
      price: 21220.0171134235,
    },
    {
      date: "2022-06-26T18:49:52.650Z",
      price: 21244.040046345315,
    },
    {
      date: "2022-06-26T18:56:07.419Z",
      price: 21229.891460716844,
    },
    {
      date: "2022-06-26T18:58:51.572Z",
      price: 21236.76975398373,
    },
    {
      date: "2022-06-26T19:05:17.837Z",
      price: 21216.50241927832,
    },
    {
      date: "2022-06-26T19:09:21.931Z",
      price: 21239.40768665644,
    },
    {
      date: "2022-06-26T19:16:38.019Z",
      price: 21247.089340325176,
    },
    {
      date: "2022-06-26T19:20:56.486Z",
      price: 21250.85548305907,
    },
    {
      date: "2022-06-26T19:24:51.032Z",
      price: 21291.47501442142,
    },
    {
      date: "2022-06-26T19:29:33.098Z",
      price: 21293.451342319255,
    },
    {
      date: "2022-06-26T19:34:48.629Z",
      price: 21282.8058983312,
    },
    {
      date: "2022-06-26T19:41:38.393Z",
      price: 21285.954737354816,
    },
    {
      date: "2022-06-26T19:44:39.718Z",
      price: 21289.94303119846,
    },
    {
      date: "2022-06-26T19:50:38.009Z",
      price: 21283.230030132854,
    },
    {
      date: "2022-06-26T19:56:05.475Z",
      price: 21301.015582603384,
    },
    {
      date: "2022-06-26T19:59:53.444Z",
      price: 21296.751515098586,
    },
    {
      date: "2022-06-26T20:05:24.785Z",
      price: 21299.238813867683,
    },
    {
      date: "2022-06-26T20:10:55.997Z",
      price: 21318.86047797081,
    },
    {
      date: "2022-06-26T20:14:34.253Z",
      price: 21315.67468962967,
    },
    {
      date: "2022-06-26T20:20:03.255Z",
      price: 21288.590238073968,
    },
    {
      date: "2022-06-26T20:25:44.273Z",
      price: 21292.489116057117,
    },
    {
      date: "2022-06-26T20:29:59.435Z",
      price: 21283.143661803257,
    },
    {
      date: "2022-06-26T20:34:25.962Z",
      price: 21272.672251002845,
    },
    {
      date: "2022-06-26T20:39:53.493Z",
      price: 21311.826760845674,
    },
    {
      date: "2022-06-26T20:45:00.835Z",
      price: 21297.780449722697,
    },
    {
      date: "2022-06-26T20:49:43.753Z",
      price: 21338.95409229289,
    },
    {
      date: "2022-06-26T20:55:50.149Z",
      price: 21352.39779170969,
    },
    {
      date: "2022-06-26T21:00:22.846Z",
      price: 21378.457584431082,
    },
    {
      date: "2022-06-26T21:05:53.767Z",
      price: 21377.436133521587,
    },
    {
      date: "2022-06-26T21:09:24.723Z",
      price: 21395.76674233352,
    },
    {
      date: "2022-06-26T21:15:00.759Z",
      price: 21393.643725326336,
    },
    {
      date: "2022-06-26T21:20:32.569Z",
      price: 21377.161713898222,
    },
    {
      date: "2022-06-26T21:25:32.907Z",
      price: 21367.33818948686,
    },
    {
      date: "2022-06-26T21:30:00.099Z",
      price: 21361.15788162568,
    },
    {
      date: "2022-06-26T21:35:32.359Z",
      price: 21371.148009556397,
    },
    {
      date: "2022-06-26T21:39:37.340Z",
      price: 21407.886139022532,
    },
    {
      date: "2022-06-26T21:45:12.065Z",
      price: 21404.167169168584,
    },
    {
      date: "2022-06-26T21:50:13.359Z",
      price: 21407.86148154181,
    },
    {
      date: "2022-06-26T21:56:11.172Z",
      price: 21391.499770327788,
    },
    {
      date: "2022-06-26T22:00:27.915Z",
      price: 21389.480570807817,
    },
    {
      date: "2022-06-26T22:04:29.079Z",
      price: 21372.040067866234,
    },
    {
      date: "2022-06-26T22:10:05.709Z",
      price: 21372.425896585235,
    },
    {
      date: "2022-06-26T22:13:52.592Z",
      price: 21337.53370413915,
    },
    {
      date: "2022-06-26T22:20:01.524Z",
      price: 21278.350318696415,
    },
    {
      date: "2022-06-26T22:24:26.632Z",
      price: 21252.35356070054,
    },
    {
      date: "2022-06-26T22:30:12.812Z",
      price: 21201.055849604152,
    },
    {
      date: "2022-06-26T22:34:34.369Z",
      price: 21051.469176325136,
    },
    {
      date: "2022-06-26T22:39:04.505Z",
      price: 21064.072599683946,
    },
    {
      date: "2022-06-26T22:45:02.482Z",
      price: 21034.922266625053,
    },
    {
      date: "2022-06-26T22:49:07.884Z",
      price: 21048.44814207248,
    },
    {
      date: "2022-06-26T22:55:10.302Z",
      price: 21063.023132516777,
    },
    {
      date: "2022-06-26T23:01:03.618Z",
      price: 21123.118199643006,
    },
    {
      date: "2022-06-26T23:04:14.284Z",
      price: 21118.831556203146,
    },
    {
      date: "2022-06-26T23:09:27.369Z",
      price: 21138.984479000046,
    },
    {
      date: "2022-06-26T23:14:54.187Z",
      price: 21207.276126346213,
    },
    {
      date: "2022-06-26T23:20:47.020Z",
      price: 21151.055552837348,
    },
    {
      date: "2022-06-26T23:24:52.281Z",
      price: 21143.458943040187,
    },
    {
      date: "2022-06-26T23:29:58.047Z",
      price: 21149.068319947808,
    },
    {
      date: "2022-06-26T23:34:41.494Z",
      price: 21165.427582164408,
    },
    {
      date: "2022-06-26T23:39:37.995Z",
      price: 21129.312614945804,
    },
    {
      date: "2022-06-26T23:44:51.250Z",
      price: 21083.11738637013,
    },
    {
      date: "2022-06-26T23:50:14.862Z",
      price: 21084.170190853907,
    },
    {
      date: "2022-06-26T23:55:23.641Z",
      price: 21064.070442005395,
    },
    {
      date: "2022-06-26T23:59:11.021Z",
      price: 21052.80539783573,
    },
    {
      date: "2022-06-27T00:05:12.191Z",
      price: 21054.744953165038,
    },
    {
      date: "2022-06-27T00:09:27.365Z",
      price: 21089.679153842746,
    },
    {
      date: "2022-06-27T00:13:59.698Z",
      price: 21055.98987807136,
    },
    {
      date: "2022-06-27T00:19:18.826Z",
      price: 21033.703230189167,
    },
    {
      date: "2022-06-27T00:25:06.309Z",
      price: 21070.63521022006,
    },
    {
      date: "2022-06-27T00:31:01.199Z",
      price: 21064.281070234338,
    },
    {
      date: "2022-06-27T00:35:10.444Z",
      price: 21084.958009744594,
    },
    {
      date: "2022-06-27T00:41:09.251Z",
      price: 21067.770872141853,
    },
    {
      date: "2022-06-27T00:46:27.156Z",
      price: 21072.27849517311,
    },
    {
      date: "2022-06-27T00:51:12.767Z",
      price: 21059.445438543295,
    },
    {
      date: "2022-06-27T00:55:28.864Z",
      price: 21045.070897436126,
    },
    {
      date: "2022-06-27T01:01:54.898Z",
      price: 21082.588713089288,
    },
    {
      date: "2022-06-27T01:08:00.155Z",
      price: 21034.66956678868,
    },
    {
      date: "2022-06-27T01:09:41.550Z",
      price: 21044.4406346052,
    },
    {
      date: "2022-06-27T01:14:37.969Z",
      price: 21028.077818427035,
    },
    {
      date: "2022-06-27T01:18:41.764Z",
      price: 21009.526346461887,
    },
    {
      date: "2022-06-27T01:24:46.390Z",
      price: 21093.151065534643,
    },
    {
      date: "2022-06-27T01:30:04.099Z",
      price: 21138.452063547782,
    },
    {
      date: "2022-06-27T01:35:05.788Z",
      price: 21100.10649409246,
    },
    {
      date: "2022-06-27T01:40:33.496Z",
      price: 21103.301095261406,
    },
    {
      date: "2022-06-27T01:44:51.211Z",
      price: 21085.221904209007,
    },
    {
      date: "2022-06-27T01:49:54.297Z",
      price: 21087.409931304897,
    },
    {
      date: "2022-06-27T01:55:21.535Z",
      price: 21092.6244674798,
    },
    {
      date: "2022-06-27T01:59:47.227Z",
      price: 21090.499206583467,
    },
    {
      date: "2022-06-27T02:04:42.911Z",
      price: 21104.43083969516,
    },
    {
      date: "2022-06-27T02:09:07.175Z",
      price: 21108.55200918019,
    },
    {
      date: "2022-06-27T02:15:16.373Z",
      price: 21072.0450229796,
    },
    {
      date: "2022-06-27T02:19:26.135Z",
      price: 21092.203871926515,
    },
    {
      date: "2022-06-27T02:25:01.378Z",
      price: 21094.33017645292,
    },
    {
      date: "2022-06-27T02:30:22.850Z",
      price: 21083.456830788822,
    },
    {
      date: "2022-06-27T02:35:24.688Z",
      price: 21129.864661891832,
    },
    {
      date: "2022-06-27T02:39:36.037Z",
      price: 21126.168819621045,
    },
    {
      date: "2022-06-27T02:44:43.552Z",
      price: 21131.26910127566,
    },
    {
      date: "2022-06-27T02:49:44.581Z",
      price: 21132.64788624852,
    },
    {
      date: "2022-06-27T02:55:08.541Z",
      price: 21141.166070972748,
    },
    {
      date: "2022-06-27T03:00:14.365Z",
      price: 21136.259932029992,
    },
    {
      date: "2022-06-27T03:03:52.935Z",
      price: 21140.93539328481,
    },
    {
      date: "2022-06-27T03:09:44.085Z",
      price: 21134.677870641324,
    },
    {
      date: "2022-06-27T03:14:25.787Z",
      price: 21140.771052028686,
    },
    {
      date: "2022-06-27T03:19:59.596Z",
      price: 21186.69764110713,
    },
    {
      date: "2022-06-27T03:23:39.203Z",
      price: 21176.84534953776,
    },
    {
      date: "2022-06-27T03:30:03.498Z",
      price: 21170.59620949722,
    },
    {
      date: "2022-06-27T03:34:48.910Z",
      price: 21169.286695213148,
    },
    {
      date: "2022-06-27T03:40:20.746Z",
      price: 21173.26124722073,
    },
    {
      date: "2022-06-27T03:45:44.533Z",
      price: 21167.269205045304,
    },
    {
      date: "2022-06-27T03:50:05.301Z",
      price: 21150.304814759285,
    },
    {
      date: "2022-06-27T03:55:19.760Z",
      price: 21158.60948989086,
    },
    {
      date: "2022-06-27T03:59:52.788Z",
      price: 21174.637375374077,
    },
    {
      date: "2022-06-27T04:05:23.541Z",
      price: 21169.488597982545,
    },
    {
      date: "2022-06-27T04:10:37.378Z",
      price: 21187.562179193992,
    },
    {
      date: "2022-06-27T04:15:57.241Z",
      price: 21183.09098654426,
    },
    {
      date: "2022-06-27T04:19:41.856Z",
      price: 21184.88550561098,
    },
    {
      date: "2022-06-27T04:25:05.957Z",
      price: 21244.281796157793,
    },
    {
      date: "2022-06-27T04:31:19.725Z",
      price: 21228.948333862845,
    },
    {
      date: "2022-06-27T04:35:49.828Z",
      price: 21230.357739613104,
    },
    {
      date: "2022-06-27T04:40:01.442Z",
      price: 21233.960681103777,
    },
    {
      date: "2022-06-27T04:45:13.283Z",
      price: 21248.1975192199,
    },
    {
      date: "2022-06-27T04:51:04.333Z",
      price: 21266.213254581482,
    },
    {
      date: "2022-06-27T04:54:38.831Z",
      price: 21255.40597252002,
    },
    {
      date: "2022-06-27T04:59:00.677Z",
      price: 21249.487261188828,
    },
    {
      date: "2022-06-27T05:03:35.779Z",
      price: 21254.210580475574,
    },
    {
      date: "2022-06-27T05:10:06.187Z",
      price: 21256.935014471674,
    },
    {
      date: "2022-06-27T05:14:55.183Z",
      price: 21259.50268875892,
    },
    {
      date: "2022-06-27T05:20:01.161Z",
      price: 21229.858621387775,
    },
    {
      date: "2022-06-27T05:25:38.976Z",
      price: 21229.295331290283,
    },
    {
      date: "2022-06-27T05:30:32.632Z",
      price: 21205.388350987254,
    },
    {
      date: "2022-06-27T05:34:47.261Z",
      price: 21211.328685132445,
    },
    {
      date: "2022-06-27T05:40:09.702Z",
      price: 21200.76053575363,
    },
    {
      date: "2022-06-27T05:45:04.040Z",
      price: 21204.225519505835,
    },
    {
      date: "2022-06-27T05:50:06.702Z",
      price: 21210.55580593446,
    },
    {
      date: "2022-06-27T05:56:01.405Z",
      price: 21195.988467058294,
    },
    {
      date: "2022-06-27T05:58:51.434Z",
      price: 21200.64910466175,
    },
    {
      date: "2022-06-27T06:04:04.110Z",
      price: 21183.010399270093,
    },
    {
      date: "2022-06-27T06:09:49.413Z",
      price: 21178.861994178857,
    },
    {
      date: "2022-06-27T06:14:56.827Z",
      price: 21198.854166231802,
    },
    {
      date: "2022-06-27T06:20:27.854Z",
      price: 21215.33080205404,
    },
    {
      date: "2022-06-27T06:23:38.590Z",
      price: 21202.660071359765,
    },
    {
      date: "2022-06-27T06:30:00.572Z",
      price: 21205.74461885191,
    },
    {
      date: "2022-06-27T06:35:26.227Z",
      price: 21230.496478481502,
    },
    {
      date: "2022-06-27T06:39:41.513Z",
      price: 21238.26534520709,
    },
    {
      date: "2022-06-27T06:45:08.745Z",
      price: 21220.023229630286,
    },
    {
      date: "2022-06-27T06:49:48.713Z",
      price: 21231.985028830786,
    },
    {
      date: "2022-06-27T06:54:06.539Z",
      price: 21230.925290269814,
    },
    {
      date: "2022-06-27T06:59:57.205Z",
      price: 21275.134340999495,
    },
    {
      date: "2022-06-27T07:04:53.206Z",
      price: 21286.53861003869,
    },
    {
      date: "2022-06-27T07:10:04.819Z",
      price: 21316.83494884756,
    },
    {
      date: "2022-06-27T07:14:33.689Z",
      price: 21320.92668138537,
    },
    {
      date: "2022-06-27T07:20:13.118Z",
      price: 21363.28645913013,
    },
    {
      date: "2022-06-27T07:25:32.704Z",
      price: 21353.241792222885,
    },
    {
      date: "2022-06-27T07:30:19.485Z",
      price: 21382.298274410557,
    },
    {
      date: "2022-06-27T07:35:50.630Z",
      price: 21366.125224153726,
    },
    {
      date: "2022-06-27T07:41:00.369Z",
      price: 21359.752245063028,
    },
    {
      date: "2022-06-27T07:45:29.378Z",
      price: 21367.85444263284,
    },
    {
      date: "2022-06-27T07:49:26.551Z",
      price: 21355.839531559224,
    },
    {
      date: "2022-06-27T07:55:13.404Z",
      price: 21352.202586823434,
    },
    {
      date: "2022-06-27T08:00:32.057Z",
      price: 21365.270294448943,
    },
    {
      date: "2022-06-27T08:04:19.335Z",
      price: 21403.67410372399,
    },
    {
      date: "2022-06-27T08:10:38.293Z",
      price: 21398.85971460066,
    },
    {
      date: "2022-06-27T08:13:51.460Z",
      price: 21401.655887751767,
    },
    {
      date: "2022-06-27T08:19:59.788Z",
      price: 21397.900301813894,
    },
    {
      date: "2022-06-27T08:25:12.094Z",
      price: 21389.547610840564,
    },
    {
      date: "2022-06-27T08:29:13.004Z",
      price: 21393.22516472663,
    },
    {
      date: "2022-06-27T08:35:00.249Z",
      price: 21380.435603876693,
    },
    {
      date: "2022-06-27T08:40:34.824Z",
      price: 21434.74526316939,
    },
    {
      date: "2022-06-27T08:45:42.058Z",
      price: 21430.565105312737,
    },
    {
      date: "2022-06-27T08:50:15.767Z",
      price: 21423.434954034,
    },
    {
      date: "2022-06-27T08:54:47.522Z",
      price: 21454.718163351597,
    },
    {
      date: "2022-06-27T09:00:08.727Z",
      price: 21465.998240729183,
    },
    {
      date: "2022-06-27T09:05:36.671Z",
      price: 21456.38460044214,
    },
    {
      date: "2022-06-27T09:10:24.941Z",
      price: 21455.958413132747,
    },
    {
      date: "2022-06-27T09:14:56.657Z",
      price: 21462.394436655595,
    },
    {
      date: "2022-06-27T09:20:08.280Z",
      price: 21465.551004540543,
    },
    {
      date: "2022-06-27T09:25:26.143Z",
      price: 21456.098712859795,
    },
    {
      date: "2022-06-27T09:30:23.065Z",
      price: 21445.584743034997,
    },
    {
      date: "2022-06-27T09:34:59.669Z",
      price: 21445.050317098812,
    },
    {
      date: "2022-06-27T09:41:11.829Z",
      price: 21474.11857372213,
    },
    {
      date: "2022-06-27T09:45:41.609Z",
      price: 21454.692962256184,
    },
    {
      date: "2022-06-27T09:49:45.384Z",
      price: 21465.841506833745,
    },
    {
      date: "2022-06-27T09:55:44.107Z",
      price: 21481.230089298817,
    },
    {
      date: "2022-06-27T10:00:15.811Z",
      price: 21475.850906626994,
    },
    {
      date: "2022-06-27T10:05:41.261Z",
      price: 21467.101978277886,
    },
    {
      date: "2022-06-27T10:09:59.533Z",
      price: 21458.25270382718,
    },
    {
      date: "2022-06-27T10:14:46.171Z",
      price: 21433.966015485443,
    },
    {
      date: "2022-06-27T10:19:07.235Z",
      price: 21434.65766563342,
    },
    {
      date: "2022-06-27T10:25:18.382Z",
      price: 21461.086558809428,
    },
    {
      date: "2022-06-27T10:29:57.168Z",
      price: 21450.47017887765,
    },
    {
      date: "2022-06-27T10:34:46.983Z",
      price: 21439.961117648436,
    },
    {
      date: "2022-06-27T10:39:42.897Z",
      price: 21445.713677719577,
    },
    {
      date: "2022-06-27T10:44:23.305Z",
      price: 21454.642588174727,
    },
    {
      date: "2022-06-27T10:49:38.515Z",
      price: 21454.988683921696,
    },
    {
      date: "2022-06-27T10:53:42.603Z",
      price: 21444.546865543853,
    },
    {
      date: "2022-06-27T11:00:02.536Z",
      price: 21457.94923288425,
    },
    {
      date: "2022-06-27T11:05:23.285Z",
      price: 21431.91682578062,
    },
    {
      date: "2022-06-27T11:10:04.663Z",
      price: 21399.65653553099,
    },
    {
      date: "2022-06-27T11:14:55.173Z",
      price: 21432.089568416395,
    },
    {
      date: "2022-06-27T11:20:26.407Z",
      price: 21435.707225965907,
    },
    {
      date: "2022-06-27T11:24:38.692Z",
      price: 21394.323066511188,
    },
    {
      date: "2022-06-27T11:30:16.914Z",
      price: 21365.220878149656,
    },
    {
      date: "2022-06-27T11:34:58.853Z",
      price: 21371.811784831996,
    },
    {
      date: "2022-06-27T11:39:05.380Z",
      price: 21352.30433996257,
    },
    {
      date: "2022-06-27T11:45:02.887Z",
      price: 21354.08259502932,
    },
    {
      date: "2022-06-27T11:49:04.638Z",
      price: 21364.07080390744,
    },
    {
      date: "2022-06-27T11:54:48.281Z",
      price: 21359.30603688557,
    },
    {
      date: "2022-06-27T11:58:57.122Z",
      price: 21334.644028294497,
    },
    {
      date: "2022-06-27T12:05:03.196Z",
      price: 21354.957782340847,
    },
    {
      date: "2022-06-27T12:10:27.871Z",
      price: 21351.999655635507,
    },
    {
      date: "2022-06-27T12:15:29.924Z",
      price: 21305.342917782706,
    },
    {
      date: "2022-06-27T12:19:14.957Z",
      price: 21314.16186346852,
    },
    {
      date: "2022-06-27T12:25:01.460Z",
      price: 21301.095977516088,
    },
    {
      date: "2022-06-27T12:28:53.842Z",
      price: 21300.61121367033,
    },
    {
      date: "2022-06-27T12:35:38.119Z",
      price: 21256.016482549334,
    },
    {
      date: "2022-06-27T12:41:21.500Z",
      price: 21251.759138813857,
    },
    {
      date: "2022-06-27T12:45:24.060Z",
      price: 21251.797992894528,
    },
    {
      date: "2022-06-27T12:50:42.077Z",
      price: 21225.08326531863,
    },
    {
      date: "2022-06-27T12:55:21.682Z",
      price: 21207.592779972947,
    },
    {
      date: "2022-06-27T13:00:58.937Z",
      price: 21205.134568636415,
    },
    {
      date: "2022-06-27T13:05:33.108Z",
      price: 21211.025342618355,
    },
    {
      date: "2022-06-27T13:10:49.000Z",
      price: 21227.65367451008,
    },
    {
      date: "2022-06-27T13:10:49.893Z",
      price: 21227.65367451008,
    },
  ];
  // const [queryParams] = useQueryParams({
  //   id: StringParam,
  //   name: StringParam,
  // });
  const [timeFilter, setTimeFilter] = React.useState<string>("1");
  const [isErrorMessage, setIsErrorMessage] = React.useState<string>("");
  const [boxWidth, setBoxWidth] = React.useState<number>(0);
  const { height } = useWindowDimensions();
  const [{ data, loading, error }, fetch] = useAxios(
    {
      url: `https://api.coingecko.com/api/v3/coins/${"bitcoin"}/market_chart?vs_currency=usd&days=${"1"}`,
      method: "GET",
    },
    { manual: true }
  );
  const gridItemRef = React.useRef<HTMLDivElement>(null);

  // React.useEffect(() => {
  //   if (queryParams.id && queryParams.name) {
  //     fetch();
  //   }
  // }, [fetch, queryParams, queryParams.id, queryParams.name]);

  React.useEffect(() => {
    if (error) {
      setIsErrorMessage(error.message);
    }
  }, [error]);

  React.useEffect(() => {
    console.log("FilteredD", filteredData);

    const handleResize = (width?: number) => {
      setBoxWidth(width || 0);
    };

    handleResize(gridItemRef.current?.clientWidth || 0);

    window.addEventListener("resize", () =>
      handleResize(gridItemRef?.current?.clientWidth || 0)
    );

    return () => {
      window.removeEventListener("resize", () => handleResize());
    };
  }, [gridItemRef]);

  const mappedData: DataProps[] = React.useMemo(() => {
    return data
      ? data?.prices.map((ele: any) => ({
          date: new Date(ele[0]),
          price: ele[1],
        }))
      : [];
  }, [data]);

  const handleError = (
    e: React.SyntheticEvent<any>,
    reason?: SnackbarCloseReason
  ) => {
    setIsErrorMessage("");
  };

  return (
    <React.Fragment>
      <Grid container justify="center">
        <Grid ref={gridItemRef} item xs={12} md={10} lg={8}>
          <SC.MarketHeader>
            <SC.Title>{"bitcoin"}</SC.Title>

            <TimeFilterButtons
              value={timeFilter}
              onChange={(v) => setTimeFilter(v || "")}
            />
          </SC.MarketHeader>
          {loading ? (
            <Skeleton
              variant="rect"
              height={Math.floor(height * 0.6)}
              width={boxWidth}
            />
          ) : (
            <>
              {console.log("filteredData", filteredData)}

              <PrimaryChart
                data={filteredData ?? []}
                height={Math.floor(height * 0.4)}
                width={boxWidth}
                margin={{
                  top: 16,
                  right: 16,
                  bottom: 40,
                  left: 48,
                }}
              />
            </>
          )}
        </Grid>
        <Snackbar open={!!isErrorMessage} onClose={handleError}>
          <Alert onClose={handleError} severity="error">
            {isErrorMessage}
          </Alert>
        </Snackbar>
      </Grid>
    </React.Fragment>
  );
};

export default Market;
